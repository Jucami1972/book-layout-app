{
  "version": "5",
  "dialect": "postgresql",
  "id": "0001_initial_schema",
  "prevId": "",
  "tables": {
    "users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "unique": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "passwordHash": {
          "name": "passwordHash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "planType": {
          "name": "planType",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'FREE'"
        },
        "planActive": {
          "name": "planActive",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": "true"
        },
        "subscriptionStartDate": {
          "name": "subscriptionStartDate",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "subscriptionEndDate": {
          "name": "subscriptionEndDate",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "stripeCustomerId": {
          "name": "stripeCustomerId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripeSubscriptionId": {
          "name": "stripeSubscriptionId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "resetPasswordToken": {
          "name": "resetPasswordToken",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "resetPasswordExpiry": {
          "name": "resetPasswordExpiry",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "emailVerified": {
          "name": "emailVerified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": "false"
        },
        "emailVerificationToken": {
          "name": "emailVerificationToken",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "lastSignedIn": {
          "name": "lastSignedIn",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "users_email_idx": {
          "name": "users_email_idx",
          "columns": ["email"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "subscriptionHistory": {
      "name": "subscriptionHistory",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "userId": {
          "name": "userId",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "oldPlan": {
          "name": "oldPlan",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "newPlan": {
          "name": "newPlan",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "effectiveDate": {
          "name": "effectiveDate",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "subscriptionHistory_userId_idx": {
          "name": "subscriptionHistory_userId_idx",
          "columns": ["userId"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "projects": {
      "name": "projects",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "userId": {
          "name": "userId",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subtitle": {
          "name": "subtitle",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "author": {
          "name": "author",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "genre": {
          "name": "genre",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "publicationType": {
          "name": "publicationType",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'both'"
        },
        "pageSize": {
          "name": "pageSize",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'6x9'"
        },
        "customWidth": {
          "name": "customWidth",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "customHeight": {
          "name": "customHeight",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "marginTop": {
          "name": "marginTop",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": "19"
        },
        "marginBottom": {
          "name": "marginBottom",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": "19"
        },
        "marginLeft": {
          "name": "marginLeft",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": "19"
        },
        "marginRight": {
          "name": "marginRight",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": "19"
        },
        "marginGutter": {
          "name": "marginGutter",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": "6"
        },
        "fontFamily": {
          "name": "fontFamily",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'Georgia'"
        },
        "fontSize": {
          "name": "fontSize",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": "11"
        },
        "lineHeight": {
          "name": "lineHeight",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": "160"
        },
        "coverImageUrl": {
          "name": "coverImageUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "coverImageKey": {
          "name": "coverImageKey",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "biography": {
          "name": "biography",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "dedication": {
          "name": "dedication",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "acknowledgments": {
          "name": "acknowledgments",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "isbn": {
          "name": "isbn",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "publisher": {
          "name": "publisher",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "printingInfo": {
          "name": "printingInfo",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "copyright": {
          "name": "copyright",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "autoNumberChapters": {
          "name": "autoNumberChapters",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": "true"
        },
        "chapterNumberFormat": {
          "name": "chapterNumberFormat",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'Cap√≠tulo {n}'"
        },
        "templateId": {
          "name": "templateId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "projects_userId_idx": {
          "name": "projects_userId_idx",
          "columns": ["userId"],
          "isUnique": false
        },
        "projects_status_idx": {
          "name": "projects_status_idx",
          "columns": ["status"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "chapters": {
      "name": "chapters",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "projectId": {
          "name": "projectId",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "parentId": {
          "name": "parentId",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "orderIndex": {
          "name": "orderIndex",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "level": {
          "name": "level",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": "1"
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'chapter'"
        },
        "startOnNewPage": {
          "name": "startOnNewPage",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": "true"
        },
        "includeInToc": {
          "name": "includeInToc",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": "true"
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "chapters_projectId_idx": {
          "name": "chapters_projectId_idx",
          "columns": ["projectId"],
          "isUnique": false
        },
        "chapters_orderIndex_idx": {
          "name": "chapters_orderIndex_idx",
          "columns": ["orderIndex"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "book_references": {
      "name": "book_references",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "projectId": {
          "name": "projectId",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "chapterId": {
          "name": "chapterId",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'book'"
        },
        "author": {
          "name": "author",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "year": {
          "name": "year",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "publisher": {
          "name": "publisher",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "book_references_projectId_idx": {
          "name": "book_references_projectId_idx",
          "columns": ["projectId"],
          "isUnique": false
        },
        "book_references_chapterId_idx": {
          "name": "book_references_chapterId_idx",
          "columns": ["chapterId"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "exports": {
      "name": "exports",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "projectId": {
          "name": "projectId",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "userId": {
          "name": "userId",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "format": {
          "name": "format",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "fileUrl": {
          "name": "fileUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "fileKey": {
          "name": "fileKey",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "fileSize": {
          "name": "fileSize",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'processing'"
        },
        "errorMessage": {
          "name": "errorMessage",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "exports_userId_idx": {
          "name": "exports_userId_idx",
          "columns": ["userId"],
          "isUnique": false
        },
        "exports_projectId_idx": {
          "name": "exports_projectId_idx",
          "columns": ["projectId"],
          "isUnique": false
        },
        "exports_status_idx": {
          "name": "exports_status_idx",
          "columns": ["status"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "payments": {
      "name": "payments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "userId": {
          "name": "userId",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "stripePaymentId": {
          "name": "stripePaymentId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "unique": true
        },
        "amount": {
          "name": "amount",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'USD'"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "planType": {
          "name": "planType",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "payments_userId_idx": {
          "name": "payments_userId_idx",
          "columns": ["userId"],
          "isUnique": false
        },
        "payments_stripePaymentId_idx": {
          "name": "payments_stripePaymentId_idx",
          "columns": ["stripePaymentId"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "auditLogs": {
      "name": "auditLogs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "userId": {
          "name": "userId",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "resourceType": {
          "name": "resourceType",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "resourceId": {
          "name": "resourceId",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "details": {
          "name": "details",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ipAddress": {
          "name": "ipAddress",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "userAgent": {
          "name": "userAgent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "auditLogs_userId_idx": {
          "name": "auditLogs_userId_idx",
          "columns": ["userId"],
          "isUnique": false
        },
        "auditLogs_action_idx": {
          "name": "auditLogs_action_idx",
          "columns": ["action"],
          "isUnique": false
        },
        "auditLogs_createdAt_idx": {
          "name": "auditLogs_createdAt_idx",
          "columns": ["createdAt"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    }
  },
  "schemas": {},
  "sequences": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
